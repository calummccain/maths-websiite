<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">

        <link rel="stylesheet" href="../css/test.css">

        <title>sHapES | Navigation</title>
    </head>

    <body>

        <div id="top">
            <a href="/root/index.html">index</a>
        </div>

        <canvas id="c"></canvas>

        <div id="content">



        </div>

        <script type="module">

            import * as MAIN from "../js/main/main-utilities.js";
            import * as THREE from "../js/three.module.js";
            import { hyperbolicHexagonalGeometry } from "../js/geometries/633-geometry.js";
            import { MapControls } from "../js/orbit-controls.js";

            var canvas, scene, renderer;


            init();



            function init() {

                canvas = document.getElementById("c");
                var content = document.getElementById("content");

                var WIDTH = window.innerWidth;
                var HEIGHT = window.innerHeight;

                const def = 3;
                const spacing = 1;

                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x405060);

                // Orthographic
                //var camera = new THREE.OrthographicCamera(WIDTH / - 2, WIDTH / 2, HEIGHT / 2, HEIGHT / - 2, 1, 100);

                // Perspective
                var camera = new THREE.PerspectiveCamera(70, WIDTH / HEIGHT, 1, 100);

                camera.position.set(3 * spacing, 5 * spacing, spacing);
                camera.up = new THREE.Vector3(0, 0, -1);

                scene.add(camera);

                var mouse = new THREE.Vector2(), INTERSECTED;
                var raycaster = new THREE.Raycaster();

                scene.add(new THREE.HemisphereLight(0xcccccc, 0x222222));

                MAIN.addCellToScene(def, 1, 4, '', hyperbolicHexagonalGeometry, 108, scene, '', 0, 0, 0);

                renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
                renderer.setClearColor(0xffffff, 1);
                renderer.setPixelRatio(window.devicePixelRatio);

                var controls = new MapControls(camera, renderer.domElement);
                controls.target = new THREE.Vector3(0, 0, 0);
                // console.log(controls.screenSpacePanning);
                //controls.enablePan = true;
                // console.log(controls.screenSpacePanning);
                controls.update();

                //document.addEventListener('mousemove', (event) => { MAIN.onDocumentMouseMove(event, mouse, raycaster, camera, scene, INTERSECTED); }, false);
                //document.addEventListener('click', function () { MAIN.onDocumentMouseClick(n, opacityValue, order, s, geometryFunction, numberofFaces, specialLetter, mouse); }, false);


                render();

                function render() {

                    updateSize();

                    requestAnimationFrame(render);

                    controls.update();
                    renderer.render(scene, camera);

                }

                function updateSize() {

                    var width = canvas.clientWidth;
                    var height = canvas.clientHeight;

                    if (canvas.width !== width || canvas.height !== height) {

                        renderer.setSize(width, height, false);
                        camera.aspect = width / height;
                        camera.updateProjectionMatrix();

                    }

                }

                updateSize();

                document.body.appendChild(renderer.domElement);

            }

        </script>

    </body>

</html>
