<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">

        <link rel="stylesheet" href="../css/test.css">
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

        <title>sHapES</title>
    </head>

    <body>

        <script type="module">

            var view = document.getElementById("view");
            console.log(view);

            import * as MAIN from "../js/main/main-utilities.js";
            import * as THREE from "../js/three.module.js";

            import { hyperbolicTetrahedronGeometry } from "../js/geometries/33n-geometry.js";
            import { hyperbolicOctahedronGeometry } from "../js/geometries/34n-geometry.js";
            import { hyperbolicIcosahedronGeometry } from "../js/geometries/35n-geometry.js";
            import { hyperbolicCubeGeometry } from "../js/geometries/43n-geometry.js";
            import { hyperbolicDodecahedronGeometry } from "../js/geometries/53n-geometry.js";
            import { hyperbolicHexagonalGeometry } from "../js/geometries/63n-geometry.js";

            //import { cxxCellGeometry } from "../js/geometries/120-cell-geometry.js";

            import { MapControls } from "../js/orbit-controls.js";
            import { lineBox } from "../js/main/box-utilities.js";

            var WIDTH = view.clientWidth;
            var HEIGHT = view.clientHeight;

            const def = 3;
            const s = 3;
            const bs = s * 0.4;

            var scene = new THREE.Scene();
            scene.background = new THREE.Color(0xDDDDDD);

            // Orthographic
            // var camera = new THREE.OrthographicCamera(WIDTH / - 2, WIDTH / 2, HEIGHT / 2, HEIGHT / - 2, 10, 100);

            // Perspective
            var camera = new THREE.PerspectiveCamera(70, WIDTH / HEIGHT, 1, 100);
            camera.position.set(3 * s, 0, -4 * s);
            camera.up = new THREE.Vector3(0, -1, 0);
            //camera.lookAt(3 * s, 0, 0);
            camera.add(new THREE.HemisphereLight(0xaaaaaa, 0x555555));

            scene.add(camera);

            var mouse = new THREE.Vector2(), INTERSECTED;
            var raycaster = new THREE.Raycaster();

            scene.add(new THREE.HemisphereLight(0xcccccc, 0x222222));

            // cubes
            MAIN.addCellToScene({ geometryFunction: hyperbolicCubeGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 5, colour: "#F9A834", numberOfFaces: 6, x: 0, y: 0, z: 0 });
            MAIN.addCellToScene({ geometryFunction: hyperbolicCubeGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 6, colour: "#FFD083", numberOfFaces: 6, x: 0, y: s, z: 0 });

            // icosahedrons
            MAIN.addCellToScene({ geometryFunction: hyperbolicIcosahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 3, colour: "#C86218", numberOfFaces: 20, x: s, y: 0, z: 0 });

            // tetrahedron
            MAIN.addCellToScene({ geometryFunction: hyperbolicTetrahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 6, colour: "#EC5064", numberOfFaces: 4, x: 2 * s, y: 0, z: 0 });

            // octahedron
            MAIN.addCellToScene({ geometryFunction: hyperbolicOctahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 4, colour: "#03919B", numberOfFaces: 8, x: 3 * s, y: 0, z: 0 });

            // dodecahedron
            MAIN.addCellToScene({ geometryFunction: hyperbolicDodecahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 4, colour: "#007043", numberOfFaces: 12, x: 4 * s, y: 0, z: 0 });
            MAIN.addCellToScene({ geometryFunction: hyperbolicDodecahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 5, colour: "#B4CF68", numberOfFaces: 12, x: 4 * s, y: s, z: 0 });
            MAIN.addCellToScene({ geometryFunction: hyperbolicDodecahedronGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 6, colour: "#E6F4BE", numberOfFaces: 12, x: 4 * s, y: 2 * s, z: 0 });

            // hexagonal
            MAIN.addCellToScene({ geometryFunction: hyperbolicHexagonalGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 3, colour: "#1F8276", numberOfFaces: 110, x: 5 * s, y: 0, z: 0 });
            MAIN.addCellToScene({ geometryFunction: hyperbolicHexagonalGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 4, colour: "#40BAA4", numberOfFaces: 110, x: 5 * s, y: s, z: 0 });
            MAIN.addCellToScene({ geometryFunction: hyperbolicHexagonalGeometry, scene: scene, metric: "hyperbolic", refinement: def, order: 5, colour: "#9DDED6", numberOfFaces: 110, x: 5 * s, y: 2 * s, z: 0 });

            lineBox([[-bs, -bs, bs], [-bs, -bs, -bs], [bs, -bs, -bs], [bs, -bs, bs], [-bs, s + bs, bs], [-bs, s + bs, -bs], [bs, s + bs, -bs], [bs, s + bs, bs]], "#F9A834", scene);
            lineBox([[s - bs, -bs, bs], [s - bs, -bs, -bs], [s + bs, -bs, -bs], [s + bs, -bs, bs], [s - bs, bs, bs], [s - bs, bs, -bs], [s + bs, bs, -bs], [s + bs, bs, bs]], "#C86218", scene);
            lineBox([[2 * s - bs, -bs, bs], [2 * s - bs, -bs, -bs], [2 * s + bs, -bs, -bs], [2 * s + bs, -bs, bs], [2 * s - bs, bs, bs], [2 * s - bs, bs, -bs], [2 * s + bs, bs, -bs], [2 * s + bs, bs, bs]], "#EC5064", scene);
            lineBox([[3 * s - bs, -bs, bs], [3 * s - bs, -bs, -bs], [3 * s + bs, -bs, -bs], [3 * s + bs, -bs, bs], [3 * s - bs, bs, bs], [3 * s - bs, bs, -bs], [3 * s + bs, bs, -bs], [3 * s + bs, bs, bs]], "#03919B", scene);
            lineBox([[4 * s - bs, -bs, bs], [4 * s - bs, -bs, -bs], [4 * s + bs, -bs, -bs], [4 * s + bs, -bs, bs], [4 * s - bs, 2 * s + bs, bs], [4 * s - bs, 2 * s + bs, -bs], [4 * s + bs, 2 * s + bs, -bs], [4 * s + bs, 2 * s + bs, bs]], "#007043", scene);
            lineBox([[5 * s - bs, -bs, bs], [5 * s - bs, -bs, -bs], [5 * s + bs, -bs, -bs], [5 * s + bs, -bs, bs], [5 * s - bs, 2 * s + bs, bs], [5 * s - bs, 2 * s + bs, -bs], [5 * s + bs, 2 * s + bs, -bs], [5 * s + bs, 2 * s + bs, bs]], "#1F8276", scene);

            var renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(WIDTH, HEIGHT);

            var controls = new MapControls(camera, renderer.domElement);
            controls.enableZoom = false;
            controls.enableRotate = false;
            controls.screenSpacePanning = true;
            controls.target = new THREE.Vector3(2.5 * s, s, 0);
            controls.update();

            view.appendChild(renderer.domElement);

            render();

            function render() {

                requestAnimationFrame(render);

                scene.children.forEach(function (obj) { if (obj.type === "Mesh") { obj.rotation.y = -Date.now() * 0.001; obj.rotation.z = -Date.now() * 0.0003; } });

                controls.update();
                renderer.render(scene, camera);

            }

        </script>

        <div id="panel">
            <div id="header">
                <h1>
                    <div> \(s\mathbb{H}ap\mathbb{E}\mathbb{S}\)</div>
                </h1>
            </div>
            <div id="sections">
                <h2>
                    Tetrahedral
                </h2>
                <a>\[\{3, 3, 6\}\]</a>
                <h2>
                    Cubic
                </h2>
                    <a>\[\{4, 3, 5\}\]</a>
                    <a>\[\{4, 3, 6\}\]</a>
                <h2>
                    Octahedral
                </h2>
                <a>\[\{3, 4, 4\}\]</a>
                <h2>
                    Dodecahedral
                </h2>
                <a>\[\{5, 3, 4\}\]</a>
                <a>\[\{5, 3, 5\}\]</a>
                <a>\[\{5, 3, 6\}\]</a>
                <h2>
                    Icosahedral
                </h2>
                <a>\[\{3, 5, 3\}\]</a>
                <h2>
                    Hexagonal
                </h2>
                <a>\[\{6, 3, 3\}\]</a>
                <a>\[\{6, 3, 4\}\]</a>
                <a>\[\{6, 3, 5\}\]</a>
                <a href="/root/index.html">index</a>
            </div>
        </div>

        <div id="view">

        </div>

    </body>

</html>
